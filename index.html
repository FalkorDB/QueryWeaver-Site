<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QueryWeaver — Graph-Powered Text-to-SQL for Enterprise Data Democratization</title>
    <meta name="description" content="Graph-powered Text-to-SQL that reduces join errors by 40%. Securely connect MySQL or PostgreSQL databases. Open-source solution with enterprise-grade accuracy for natural language data analysis.">
    
    <!-- SEO and Social Meta -->
    <meta property="og:title" content="QueryWeaver — Graph-Powered Text-to-SQL for Enterprise Data Democratization">
    <meta property="og:description" content="Graph-powered Text-to-SQL that reduces join errors by 40%. Securely connect MySQL or PostgreSQL databases with enterprise-grade accuracy.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.queryweaver.ai">
    <meta property="og:image" content="https://www.queryweaver.ai/static/icons/queryweaver-logo.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://www.queryweaver.ai/static/icons/queryweaver-logo.jpg">
    <meta name="twitter:title" content="QueryWeaver — Graph-Powered Text-to-SQL for Enterprise Data Democratization">
    <meta name="twitter:description" content="Graph-powered Text-to-SQL that reduces join errors by 40%. Securely connect MySQL or PostgreSQL databases with enterprise-grade accuracy.">
    <meta name="robots" content="index, follow">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "QueryWeaver",
      "description": "Graph-powered text-to-SQL conversion for enterprise databases with 40% reduction in join errors",
      "applicationCategory": "DatabaseApplication",
      "operatingSystem": "Linux, Windows, macOS",
      "softwareVersion": "1.0",
      "license": "AGPL-3.0",
      "url": "https://www.queryweaver.ai",
      "downloadUrl": "https://github.com/FalkorDB/QueryWeaver",
      "screenshot": "https://www.queryweaver.ai/static/icons/queryweaver-logo.jpg",
      "author": {
        "@type": "Organization",
        "name": "FalkorDB",
        "url": "https://www.falkordb.com"
      },
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "softwareRequirements": "Docker",
      "releaseNotes": "Open source AGPL-3.0 licensed",
      "keywords": ["text-to-sql", "natural language processing", "database query", "MySQL", "PostgreSQL", "graph database", "NL2SQL", "GraphRAG"],
      "featureList": [
        "Graph-powered schema understanding",
        "Support for MySQL and PostgreSQL databases",
        "Agentic memory system",
        "Docker deployment",
        "Azure OpenAI compatibility",
        "Self-hosted private deployment"
      ],
      "applicationSubCategory": "Database Management, Natural Language Processing"
    }
    </script>
    
    <!-- FAQ Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "How does QueryWeaver handle complex SQL joins?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "QueryWeaver uses FalkorDB's graph capabilities to understand your database relationships at a deeper level. This graph-powered semantic layer enables more accurate joins, better constraint handling, and SQL that reflects your actual business logic, reducing join errors by 40% compared to traditional text-to-SQL tools."
          }
        },
        {
          "@type": "Question",
          "name": "Is QueryWeaver compatible with Azure OpenAI?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes, QueryWeaver is compatible with Azure OpenAI. The tool supports various LLM providers and can be configured to work with Azure OpenAI services for enterprise deployments requiring specific compliance and data residency requirements."
          }
        },
        {
          "@type": "Question",
          "name": "What databases does QueryWeaver support?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "QueryWeaver currently supports MySQL and PostgreSQL databases. You can securely connect your existing database instances and query them using natural language without exposing sensitive data."
          }
        },
        {
          "@type": "Question",
          "name": "How do I deploy QueryWeaver?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "QueryWeaver can be deployed using Docker in just 5 minutes. The open-source solution allows for self-hosted, private deployment in your own infrastructure, giving you complete control over your data and ensuring enterprise security."
          }
        },
        {
          "@type": "Question",
          "name": "What license does QueryWeaver use?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "QueryWeaver is licensed under AGPL-3.0, an open-source license. This allows you to examine the code, contribute improvements, and adapt the system for your specific enterprise requirements while ensuring the software remains open source."
          }
        }
      ]
    }
    </script>
    
    <!-- Optimized Font Loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/static/css/main.css">
  <!-- Google Tag Manager -->
  <script>(function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
          'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5KF7KTQH');</script>
  <!-- End Google Tag Manager -->
</head>

<body>

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5KF7KTQH" height="0" width="0"
      style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
   
    <!-- Header -->
    <header class="site-header">
        <div class="site-header-inner">
            <div class="logo-container">
                <a href="/" class="logo-link" aria-label="QueryWeaver Home">
                    <img src="/static/icons/sqlogo.svg" alt="QueryWeaver logo - Graph-powered Text-to-SQL for Enterprise Databases" class="logo-img">
                </a>
            </div>
            <nav class="social-links" aria-label="External links">
                <a href="https://discord.com/invite/Y2mMT9VdMy" aria-label="Join our Discord community" target="_blank" rel="noopener">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"/>
                    </svg>
                </a>
                <a href="https://github.com/FalkorDB/QueryWeaver" aria-label="View source code on GitHub" target="_blank" rel="noopener">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                </a>
            </nav>
        </div>
    </header>

    <!-- Main content -->
    <main class="landing-container">
        <section class="hero-section">
            <!-- Hero content -->
            <div class="hero-content">
                <h1 class="hero-title">Graph-Powered Text-to-SQL for Enterprise Data Democratization</h1>
                <p class="hero-subtitle">Connect your MySQL or Postgres database securely. Query in plain English. Get dramatically more accurate results than traditional Text2SQL tools.</p>
                <div class="hero-ctas">
                    <a href="https://app.queryweaver.ai" class="btn btn-primary" id="run-demo-btn" type="button" target="_blank" rel="noopener noreferrer">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                        Try Live Demo
                    </a>
                    <a href="https://github.com/FalkorDB/QueryWeaver/" class="btn btn-secondary" target="_blank" rel="noopener noreferrer">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14,2 14,8 20,8"/>
                            <line x1="16" y1="13" x2="8" y2="13"/>
                            <line x1="16" y1="17" x2="8" y2="17"/>
                        </svg>
                        5-Min Setup
                    </a>
                </div>
                <p class="hero-tagline">Open Source • Graph Database Powered</p>
            </div>

            <!-- Demo card -->
            <aside class="demo-card" role="complementary" aria-label="Interactive demo">
                <!-- Tab navigation -->
                <div class="demo-tabs" role="tablist" aria-label="Demo sections">
                    <button class="demo-tab active" data-tab="live-demo" role="tab" aria-selected="true" aria-controls="live-demo" id="tab-live-demo">Live Demo</button>
                    <button class="demo-tab" data-tab="tool-overview" role="tab" aria-selected="false" aria-controls="tool-overview" id="tab-tool-overview">Overview</button>
                    <button class="demo-tab" data-tab="setup-guide" role="tab" aria-selected="false" aria-controls="setup-guide" id="tab-setup-guide">Setup</button>
                </div>

                <!-- Live Demo Content -->
                <div class="demo-content active" id="live-demo" role="tabpanel" aria-labelledby="tab-live-demo">
                    <div class="demo-label">Your Business Question:</div>
                    <div class="demo-question" aria-live="polite" tabindex="-1" role="log">Show me the top 5 customers by order count in London.</div>

                    <div class="demo-complexity">
                        <span>Complexity:</span>
                        <span class="complexity-dot filled" aria-hidden="true"></span>
                        <span class="complexity-dot" aria-hidden="true"></span>
                        <span class="complexity-dot" aria-hidden="true"></span>
                    </div>

                    <div class="demo-sql-header">
                        <div class="demo-label">Generated SQL:</div>
                        <div class="demo-success" id="success-indicator" aria-live="polite">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true">
                                <circle cx="8" cy="8" r="8" fill="currentColor"></circle>
                                <path d="M5.5 8L7 9.5L10.5 6" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                            </svg>
                            <span>Generated</span>
                        </div>
                    </div>
                    <pre class="demo-sql" id="demo-sql" aria-live="polite" aria-label="Generated SQL code"></pre>

                    <div class="demo-cta">
                        <button class="btn-light" id="demo-next" type="button">Try another question</button>
                    </div>
                </div>

                <!-- Tool Overview Video Content -->
                <div class="demo-content" id="tool-overview" role="tabpanel" aria-labelledby="tab-tool-overview">
                    <div class="demo-label">Tool Overview:</div>
                    <div class="video-container">
                        <div class="video-placeholder" onclick="this.parentNode.querySelector('.video-fallback').classList.add('show'); this.style.display='none';" role="button" tabindex="0" aria-label="Load video overview">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                            <h4>Tool Overview</h4>
                            <p>See how QueryWeaver transforms natural language into precise SQL queries</p>
                        </div>
                        <div class="video-fallback">
                            <p>
                                <strong>Video Overview Available</strong><br>
                                <a href="https://www.youtube.com/watch?v=F4hwuLlISP4" target="_blank" rel="noopener">
                                    Watch on YouTube →
                                </a>
                            </p>
                        </div>
                    </div>
                    <p class="video-description">
                        Discover how QueryWeaver's graph-powered approach delivers more accurate SQL generation for enterprise databases.
                    </p>
                </div>

                <!-- Setup Guide Content -->
                <div class="demo-content" id="setup-guide" role="tabpanel" aria-labelledby="tab-setup-guide">
                    <div class="demo-label">Quick Setup Guide:</div>
                    <div class="video-container">
                        <div class="video-placeholder" role="button" tabindex="0" aria-label="Setup guide coming soon">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2" fill="none"/>
                            </svg>
                            <h4>Docker Setup Guide</h4>
                            <p>Step-by-step installation and configuration walkthrough</p>
                        </div>
                    </div>
                    <p class="video-description">
                        Get QueryWeaver running in your environment in minutes with our comprehensive Docker setup guide.
                    </p>
                </div>
            </aside>
        </section>

        <!-- Features section -->
        <section class="features-section" id="features">
            <div class="features-intro">
                <h2>Solving the NL2SQL Accuracy Gap with GraphRAG</h2>
                <p>Three core capabilities that deliver enterprise-grade accuracy where traditional text-to-SQL tools fall short.</p>
            </div>
            <div class="features-grid">
                <article class="feature-card">
                    <div class="feature-icon" aria-hidden="true">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <circle cx="18" cy="5" r="3"></circle>
                            <circle cx="6" cy="12" r="3"></circle>
                            <circle cx="18" cy="19" r="3"></circle>
                            <line x1="8.59" y1="13.51" x2="15.42" y2="17.49" stroke="currentColor" stroke-width="2"></line>
                            <line x1="15.41" y1="6.51" x2="8.59" y2="10.49" stroke="currentColor" stroke-width="2"></line>
                        </svg>
                    </div>
                    <h3 class="feature-title">Graph-Powered Schema Understanding</h3>
                    <p class="feature-desc">Our semantic layer uses FalkorDB's graph capabilities to understand your database relationships at a deeper level. This means more accurate joins, better constraint handling, and SQL that actually reflects your business logic.</p>
                </article>

                <article class="feature-card">
                    <div class="feature-icon" aria-hidden="true">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 1L3 5l9 4 9-4-9-4z"></path>
                            <path d="M3 17l9 4 9-4"></path>
                            <path d="M3 12l9 4 9-4"></path>
                        </svg>
                    </div>
                    <h3 class="feature-title">Self-Hosted AI SQL Assistant with Open Source Foundation</h3>
                    <p class="feature-desc">Built entirely on FalkorDB as an open source project. You can examine exactly how we're doing text-to-SQL conversion, contribute improvements, or adapt the system for your specific enterprise requirements.</p>
                </article>

                <article class="feature-card">
                    <div class="feature-icon" aria-hidden="true">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                        </svg>
                    </div>
                    <h3 class="feature-title">Agentic Memory and Personalized Data History</h3>
                    <p class="feature-desc">Using Graphiti for chat history and agentic memory, powered by FalkorDB. QueryWeaver remembers your previous queries, learns your data patterns, and provides increasingly personalized results over time.</p>
                </article>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            All Rights Reserved © QueryWeaver | <a href="https://www.falkordb.com/privacy-policy/" target="_blank" rel="noopener">Privacy Policy</a> | Powered by FalkorDB
        </div>
    </footer>

    <script>
        class QueryWeaverDemo {
            constructor() {
                this.examples = [
                    {
                        q: "Show me the top 5 customers by order count in London.",
                        sql: `SELECT c.companyName, COUNT(o.orderID) AS order_count\nFROM customers c\nJOIN orders o ON c.customerID = o.customerID\nWHERE c.city = 'London'\nGROUP BY c.companyName\nORDER BY order_count DESC\nLIMIT 5;`,
                        complexity: 1
                    },
                    {
                        q: "What's the average order value by customer segment this quarter?",
                        sql: `SELECT \n  c.segment,\n  AVG(od.unitPrice * od.quantity) as avg_order_value,\n  COUNT(DISTINCT o.orderID) as total_orders\nFROM customers c\nJOIN orders o ON c.customerID = o.customerID\nJOIN order_details od ON o.orderID = od.orderID\nWHERE EXTRACT(QUARTER FROM o.orderDate) = EXTRACT(QUARTER FROM CURRENT_DATE)\n  AND EXTRACT(YEAR FROM o.orderDate) = EXTRACT(YEAR FROM CURRENT_DATE)\nGROUP BY c.segment\nORDER BY avg_order_value DESC;`,
                        complexity: 2
                    },
                    {
                        q: "Show Q4 revenue by customer segment with year-over-year comparison",
                        sql: `WITH quarterly_revenue AS (\n  SELECT \n    c.segment,\n    EXTRACT(YEAR FROM o.orderDate) as year,\n    SUM(od.unitPrice * od.quantity) as revenue\n  FROM customers c\n  JOIN orders o ON c.customerID = o.customerID\n  JOIN order_details od ON o.orderID = od.orderID\n  WHERE EXTRACT(QUARTER FROM o.orderDate) = 4\n  GROUP BY c.segment, EXTRACT(YEAR FROM o.orderDate)\n)\nSELECT \n  qr.segment,\n  COALESCE(current_year.revenue, 0) as q4_2024_revenue,\n  COALESCE(previous_year.revenue, 0) as q4_2023_revenue,\n  ROUND(\n    ((COALESCE(current_year.revenue, 0) - COALESCE(previous_year.revenue, 0)) \n     / NULLIF(previous_year.revenue, 0)) * 100, 2\n  ) as yoy_growth_percent\nFROM (SELECT DISTINCT segment FROM quarterly_revenue) qr\nLEFT JOIN quarterly_revenue current_year ON qr.segment = current_year.segment AND current_year.year = 2024\nLEFT JOIN quarterly_revenue previous_year ON qr.segment = previous_year.segment AND previous_year.year = 2023\nORDER BY q4_2024_revenue DESC;`,
                        complexity: 3
                    }
                ];
                
                this.currentIndex = 0;
                this.typingTimer = null;
                this.isTyping = false;
                this.observer = null;
                
                this.init();
            }

            init() {
                try {
                    this.initTabs();
                    this.initDemo();
                    this.bindEvents();
                    this.initIntersectionObserver();
                    this.startInitialDemo();
                } catch (error) {
                    console.error('Demo initialization failed:', error);
                    this.showErrorFallback();
                }
            }

            initTabs() {
                const tabs = document.querySelectorAll('.demo-tab');
                const contents = document.querySelectorAll('.demo-content');

                tabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        const targetId = tab.getAttribute('data-tab');
                        this.switchToTab(targetId);
                    });

                    tab.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            tab.click();
                        }
                    });
                });
            }

            switchToTab(targetId) {
                const tabs = document.querySelectorAll('.demo-tab');
                const contents = document.querySelectorAll('.demo-content');
                
                tabs.forEach(t => {
                    t.classList.remove('active');
                    t.setAttribute('aria-selected', 'false');
                });
                contents.forEach(c => c.classList.remove('active'));
                
                const targetTab = document.querySelector(`[data-tab="${targetId}"]`);
                const targetContent = document.getElementById(targetId);
                
                if (targetTab && targetContent) {
                    targetTab.classList.add('active');
                    targetTab.setAttribute('aria-selected', 'true');
                    targetContent.classList.add('active');
                }
            }

            initDemo() {
                const btn = document.getElementById('demo-next');
                if (btn) {
                    btn.addEventListener('click', () => this.nextExample());
                }
            }

            bindEvents() {
                // Add setup link scroll behavior
                const setupLink = document.querySelector('a[href="#setup"]');
                if (setupLink) {
                    setupLink.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.switchToTab('setup-guide');
                        this.scrollToDemoCard();
                    });
                }

                // Handle video placeholder clicks
                document.querySelectorAll('.video-placeholder').forEach(placeholder => {
                    placeholder.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            placeholder.click();
                        }
                    });
                });
            }

            initIntersectionObserver() {
                if ('IntersectionObserver' in window) {
                    this.observer = new IntersectionObserver((entries) => {
                        entries.forEach((entry, index) => {
                            if (entry.isIntersecting) {
                                setTimeout(() => {
                                    entry.target.classList.add('animate');
                                }, index * 150);
                                this.observer.unobserve(entry.target);
                            }
                        });
                    }, {
                        threshold: 0.1,
                        rootMargin: '0px 0px -50px 0px'
                    });

                    document.querySelectorAll('.feature-card').forEach(card => {
                        this.observer.observe(card);
                    });
                }
            }

            scrollToDemoCard() {
                const demoCard = document.querySelector('.demo-card');
                if (demoCard) {
                    setTimeout(() => {
                        demoCard.scrollIntoView({
                            behavior: 'smooth',
                            block: 'center'
                        });
                    }, 100);
                }
            }

            startInitialDemo() {
                const firstExample = this.examples[0];
                this.updateQuestion(firstExample.q, firstExample.complexity);
                this.typeSQL(firstExample.sql);
            }

            nextExample() {
                if (this.isTyping) return;
                
                this.currentIndex = (this.currentIndex + 1) % this.examples.length;
                const example = this.examples[this.currentIndex];
                
                this.updateQuestion(example.q, example.complexity);
                this.typeSQL(example.sql);

                // Analytics event
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'demo_question_changed', {
                        'event_category': 'engagement',
                        'question_index': this.currentIndex
                    });
                }
            }

            updateQuestion(question, complexity) {
                const questionEl = document.querySelector('.demo-question');
                const complexityDots = document.querySelectorAll('.complexity-dot');
                
                if (questionEl) {
                    questionEl.textContent = question;
                    questionEl.classList.add('updated');
                    setTimeout(() => questionEl.classList.remove('updated'), 300);
                    
                    // Focus for screen readers
                    setTimeout(() => {
                        questionEl.focus();
                        setTimeout(() => questionEl.blur(), 100);
                    }, 100);
                }

                // Update complexity indicators
                complexityDots.forEach((dot, index) => {
                    if (index < complexity) {
                        dot.classList.add('filled');
                    } else {
                        dot.classList.remove('filled');
                    }
                });
            }

            typeSQL(sql) {
                const sqlEl = document.getElementById('demo-sql');
                const successEl = document.getElementById('success-indicator');
                
                if (!sqlEl) return;

                this.isTyping = true;
                
                // Hide success indicator and start typing animation
                if (successEl) successEl.classList.remove('show');
                
                if (this.typingTimer) {
                    clearInterval(this.typingTimer);
                    this.typingTimer = null;
                }

                // Check for reduced motion
                const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
                
                if (prefersReducedMotion) {
                    // Instant display for reduced motion
                    sqlEl.innerHTML = this.highlightSQL(sql);
                    this.isTyping = false;
                    if (successEl) {
                        setTimeout(() => successEl.classList.add('show'), 100);
                    }
                    return;
                }

                sqlEl.classList.add('typing');
                sqlEl.innerHTML = '';
                
                let position = 0;
                // Dynamic typing speed based on content length
                const typingSpeed = Math.max(15, Math.min(40, sql.length / 20));
                
                this.typingTimer = setInterval(() => {
                    position += 1;
                    if (sqlEl) {
                        sqlEl.innerHTML = this.highlightSQL(sql.slice(0, position));
                    }
                    
                    if (position >= sql.length) {
                        clearInterval(this.typingTimer);
                        this.typingTimer = null;
                        this.isTyping = false;
                        sqlEl.classList.remove('typing');
                        if (sqlEl) {
                            sqlEl.innerHTML = this.highlightSQL(sql);
                        }
                        // Show success indicator with delay and animation
                        setTimeout(() => {
                            if (successEl) successEl.classList.add('show');
                        }, 200);
                    }
                }, typingSpeed);
            }

            highlightSQL(sql) {
                if (!sql) return '';
                
                let highlighted = this.escapeHtml(sql);
                
                // Highlight strings
                highlighted = highlighted.replace(/('[^']*')/g, '<span class="sql-string">$1</span>');
                
                // Highlight keywords
                highlighted = highlighted.replace(/\b(SELECT|FROM|JOIN|ON|WHERE|AND|OR|GROUP|BY|ORDER|LIMIT|AS|IN|IS|NULL|INNER|LEFT|RIGHT|OUTER|DESC|ASC|WITH|HAVING|CASE|WHEN|THEN|END|EXTRACT|YEAR|QUARTER|DATEDIFF|CURDATE|COALESCE|NULLIF|ROUND|DISTINCT|CURRENT_DATE|COUNT|SUM|AVG)\b/gi,
                    (match) => `<span class="sql-keyword">${match}</span>`);
                
                // Highlight functions
                highlighted = highlighted.replace(/\b(COUNT|SUM|AVG|MIN|MAX|strftime|date)\b/gi, 
                    (match) => `<span class="sql-func">${match}</span>`);
                
                // Highlight numbers
                highlighted = highlighted.replace(/\b(\d+\.?\d*)\b/g, '<span class="sql-number">$1</span>');
                
                return highlighted;
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            showErrorFallback() {
                const demoCard = document.querySelector('.demo-card');
                if (demoCard) {
                    demoCard.innerHTML = `
                        <div class="error-fallback">
                            <h3>Demo Temporarily Unavailable</h3>
                            <p>Please try refreshing the page or <a href="https://github.com/FalkorDB/falkordb" target="_blank" rel="noopener noreferrer">visit our GitHub</a> for more information.</p>
                        </div>
                    `;
                }
            }

            destroy() {
                if (this.typingTimer) {
                    clearInterval(this.typingTimer);
                }
                if (this.observer) {
                    this.observer.disconnect();
                }
            }
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            let demo;
            try {
                demo = new QueryWeaverDemo();
            } catch (error) {
                console.error('Failed to initialize demo:', error);
            }

            // Cleanup on page unload
            window.addEventListener('beforeunload', () => {
                if (demo) {
                    demo.destroy();
                }
            });
        });

        // Error boundary for uncaught errors
        window.addEventListener('error', (event) => {
            console.error('Uncaught error:', event.error);
            // Could send to analytics here
        });

        // Handle video loading fallbacks
        document.addEventListener('DOMContentLoaded', () => {
            const videos = document.querySelectorAll('iframe[src*="youtube"]');
            videos.forEach(video => {
                video.addEventListener('error', () => {
                    const fallback = video.parentNode.querySelector('.video-fallback');
                    if (fallback) {
                        fallback.classList.add('show');
                        video.style.display = 'none';
                    }
                });
            });
        });
    </script>
</body>
</html>
